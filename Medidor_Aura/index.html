<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medidor de Aura ‚ú®</title>
    <meta name="description"
        content="Descubra o n√≠vel da sua aura! Escolha uma categoria e revele sua energia c√≥smica.">
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&family=Space+Grotesk:wght@400;600;700&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a1a;
            --bg-secondary: #121230;
            --accent-purple: #9b59f0;
            --accent-pink: #e84393;
            --accent-blue: #6c5ce7;
            --accent-cyan: #00cec9;
            --accent-gold: #fdcb6e;
            --text-primary: #f0f0ff;
            --text-secondary: #a0a0cc;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated background */
        .bg-stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration) ease-in-out infinite;
        }

        @keyframes twinkle {

            0%,
            100% {
                opacity: 0.2;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.5);
            }
        }

        .nebula {
            position: fixed;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.15;
            pointer-events: none;
            z-index: 0;
        }

        .nebula-1 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, var(--accent-purple), transparent);
            top: -150px;
            right: -100px;
            animation: float 20s ease-in-out infinite;
        }

        .nebula-2 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, var(--accent-pink), transparent);
            bottom: -100px;
            left: -100px;
            animation: float 25s ease-in-out infinite reverse;
        }

        .nebula-3 {
            width: 350px;
            height: 350px;
            background: radial-gradient(circle, var(--accent-cyan), transparent);
            top: 40%;
            left: 50%;
            animation: float 18s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translate(0, 0) scale(1);
            }

            33% {
                transform: translate(30px, -20px) scale(1.1);
            }

            66% {
                transform: translate(-20px, 20px) scale(0.9);
            }
        }

        /* Main Container */
        .container {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 50px;
        }

        .header-icon {
            font-size: 60px;
            margin-bottom: 10px;
            animation: pulse-glow 3s ease-in-out infinite;
        }

        @keyframes pulse-glow {

            0%,
            100% {
                transform: scale(1);
                filter: drop-shadow(0 0 10px var(--accent-purple));
            }

            50% {
                transform: scale(1.1);
                filter: drop-shadow(0 0 30px var(--accent-purple));
            }
        }

        .header h1 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink), var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            font-weight: 300;
        }

        /* Screens */
        .screen {
            width: 100%;
            display: none;
            animation: fadeInUp 0.6s ease-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Category Cards */
        .categories-title {
            text-align: center;
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            font-weight: 300;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            width: 100%;
        }

        .category-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px 25px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--card-color1), var(--card-color2));
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 0;
        }

        .category-card:hover::before {
            opacity: 0.15;
        }

        .category-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--card-color1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), 0 0 30px color-mix(in srgb, var(--card-color1) 30%, transparent);
        }

        .category-card>* {
            position: relative;
            z-index: 1;
        }

        .card-emoji {
            font-size: 48px;
            margin-bottom: 15px;
            display: block;
        }

        .card-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .card-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-weight: 300;
            line-height: 1.4;
        }

        /* Input Screen */
        .input-screen {
            max-width: 550px;
            margin: 0 auto;
            width: 100%;
        }

        .back-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-secondary);
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 30px;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .input-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 40px 35px;
            backdrop-filter: blur(20px);
        }

        .input-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .input-header .card-emoji {
            font-size: 56px;
        }

        .input-header h2 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.6rem;
            margin-bottom: 8px;
        }

        .input-header p {
            color: var(--text-secondary);
            font-weight: 300;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 400;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .input-group input[type="text"],
        .input-group textarea,
        .input-group select {
            width: 100%;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 14px;
            color: var(--text-primary);
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            outline: none;
        }

        .input-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .input-group input:focus,
        .input-group textarea:focus,
        .input-group select:focus {
            border-color: var(--accent-purple);
            box-shadow: 0 0 20px rgba(155, 89, 240, 0.2);
        }

        .input-group select option {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .file-upload-area {
            border: 2px dashed var(--glass-border);
            border-radius: 16px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .file-upload-area:hover {
            border-color: var(--accent-purple);
            background: rgba(155, 89, 240, 0.05);
        }

        .file-upload-area.has-file {
            border-color: var(--accent-cyan);
            background: rgba(0, 206, 201, 0.05);
        }

        .file-upload-area input[type="file"] {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            opacity: 0;
            cursor: pointer;
        }

        .upload-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .upload-text {
            color: var(--text-secondary);
            font-weight: 300;
        }

        .upload-text strong {
            color: var(--accent-purple);
            font-weight: 600;
        }

        .preview-img {
            max-width: 200px;
            max-height: 200px;
            border-radius: 12px;
            margin-top: 15px;
            display: none;
        }

        .submit-btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 16px;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s ease;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink));
            color: white;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .submit-btn:hover::before {
            left: 100%;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(155, 89, 240, 0.4);
        }

        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Loading Screen */
        .loading-screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            text-align: center;
        }

        .loading-screen.active {
            display: flex;
        }

        .loading-orb {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, var(--accent-purple), var(--accent-pink), var(--accent-blue));
            animation: orb-pulse 1.5s ease-in-out infinite;
            box-shadow: 0 0 60px rgba(155, 89, 240, 0.5);
            margin-bottom: 30px;
        }

        @keyframes orb-pulse {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 0 60px rgba(155, 89, 240, 0.5);
            }

            50% {
                transform: scale(1.2);
                box-shadow: 0 0 100px rgba(155, 89, 240, 0.8);
            }
        }

        .loading-text {
            font-size: 1.2rem;
            color: var(--text-secondary);
            font-weight: 300;
        }

        .loading-dots::after {
            content: '';
            animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
            0% {
                content: '';
            }

            25% {
                content: '.';
            }

            50% {
                content: '..';
            }

            75% {
                content: '...';
            }
        }

        /* Result Screen */
        .result-screen {
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
            text-align: center;
        }

        .result-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 28px;
            padding: 50px 35px;
            backdrop-filter: blur(20px);
            position: relative;
            overflow: hidden;
        }

        .result-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, var(--result-color), transparent, var(--result-color), transparent);
            animation: rotate-border 4s linear infinite;
            opacity: 0.1;
        }

        @keyframes rotate-border {
            to {
                transform: rotate(360deg);
            }
        }

        .result-card>* {
            position: relative;
            z-index: 1;
        }

        .result-label {
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .aura-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .aura-circle .glow-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid var(--result-color);
            animation: ring-pulse 2s ease-in-out infinite;
        }

        .aura-circle .glow-ring:nth-child(2) {
            width: 130%;
            height: 130%;
            opacity: 0.5;
            animation-delay: 0.5s;
        }

        .aura-circle .glow-ring:nth-child(3) {
            width: 160%;
            height: 160%;
            opacity: 0.2;
            animation-delay: 1s;
        }

        @keyframes ring-pulse {

            0%,
            100% {
                transform: scale(1);
                opacity: var(--ring-opacity, 0.5);
            }

            50% {
                transform: scale(1.05);
                opacity: calc(var(--ring-opacity, 0.5) + 0.2);
            }
        }

        .aura-number {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 4rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--result-color), var(--result-color2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .aura-number .unit {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .aura-tier {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--result-color);
        }

        .aura-description {
            font-size: 1rem;
            color: var(--text-secondary);
            font-weight: 300;
            line-height: 1.6;
            margin-bottom: 25px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        .aura-bar-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            height: 14px;
            width: 100%;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .aura-bar {
            height: 100%;
            border-radius: 12px;
            background: linear-gradient(90deg, var(--result-color), var(--result-color2));
            width: 0%;
            transition: width 2s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 20px var(--result-color);
        }

        .aura-traits {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 30px;
        }

        .aura-trait {
            padding: 8px 18px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-weight: 400;
        }

        .result-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .retry-btn,
        .share-btn {
            padding: 14px 28px;
            border-radius: 14px;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .retry-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
        }

        .retry-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .share-btn {
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink));
            color: white;
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(155, 89, 240, 0.4);
        }

        /* Particles on result */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            pointer-events: none;
            animation: particle-float 3s ease-out infinite;
        }

        @keyframes particle-float {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }

            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0);
            }
        }

        /* Responsive */
        @media (max-width: 600px) {
            .header h1 {
                font-size: 2rem;
            }

            .categories-grid {
                grid-template-columns: 1fr;
            }

            .input-card {
                padding: 25px 20px;
            }

            .result-card {
                padding: 35px 20px;
            }

            .aura-number {
                font-size: 3rem;
            }

            .result-actions {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>

    <div class="bg-stars" id="stars"></div>
    <div class="nebula nebula-1"></div>
    <div class="nebula nebula-2"></div>
    <div class="nebula nebula-3"></div>

    <div class="container">
        <header class="header">
            <div class="header-icon">üîÆ</div>
            <h1>Medidor de Aura</h1>
            <p>Descubra o n√≠vel da sua energia c√≥smica</p>
        </header>

        <!-- Screen 1: Category Selection -->
        <div class="screen active" id="screen-categories">
            <p class="categories-title">Escolha uma categoria para revelar sua aura</p>
            <div class="categories-grid">
                <div class="category-card" data-category="frase" style="--card-color1: #9b59f0; --card-color2: #6c5ce7;"
                    onclick="selectCategory('frase')">
                    <span class="card-emoji">üí¨</span>
                    <h3 class="card-title">Frase Pessoal</h3>
                    <p class="card-desc">Sua frase favorita ou lema de vida revela muito sobre sua aura</p>
                </div>
                <div class="category-card" data-category="numero"
                    style="--card-color1: #e17055; --card-color2: #d63031;" onclick="selectCategory('numero')">
                    <span class="card-emoji">üî¢</span>
                    <h3 class="card-title">N√∫mero Favorito</h3>
                    <p class="card-desc">Os n√∫meros carregam vibra√ß√µes √∫nicas que revelam sua energia</p>
                </div>
                <div class="category-card" data-category="foto" style="--card-color1: #e84393; --card-color2: #fd79a8;"
                    onclick="selectCategory('foto')">
                    <span class="card-emoji">üì∏</span>
                    <h3 class="card-title">Foto</h3>
                    <p class="card-desc">Envie uma foto e descubra a energia que ela transmite</p>
                </div>
                <div class="category-card" data-category="personagem"
                    style="--card-color1: #00cec9; --card-color2: #81ecec;" onclick="selectCategory('personagem')">
                    <span class="card-emoji">ü¶∏</span>
                    <h3 class="card-title">Personagem Favorito</h3>
                    <p class="card-desc">O personagem que voc√™ admira diz muito sobre sua aura</p>
                </div>
                <div class="category-card" data-category="musica"
                    style="--card-color1: #fdcb6e; --card-color2: #f39c12;" onclick="selectCategory('musica')">
                    <span class="card-emoji">üéµ</span>
                    <h3 class="card-title">M√∫sica Favorita</h3>
                    <p class="card-desc">A trilha sonora da sua vida carrega sua frequ√™ncia energ√©tica</p>
                </div>
                <div class="category-card" data-category="signo" style="--card-color1: #a29bfe; --card-color2: #6c5ce7;"
                    onclick="selectCategory('signo')">
                    <span class="card-emoji">‚ôà</span>
                    <h3 class="card-title">Signo</h3>
                    <p class="card-desc">As estrelas revelam a intensidade da sua aura</p>
                </div>
                <div class="category-card" data-category="emoji" style="--card-color1: #55efc4; --card-color2: #00b894;"
                    onclick="selectCategory('emoji')">
                    <span class="card-emoji">üòé</span>
                    <h3 class="card-title">Emoji Favorito</h3>
                    <p class="card-desc">O emoji que mais te representa esconde poderes c√≥smicos</p>
                </div>
            </div>
        </div>

        <!-- Screen 2: Input -->
        <div class="screen" id="screen-input">
            <div class="input-screen">
                <button class="back-btn" onclick="goBack()">‚Üê Voltar</button>
                <div class="input-card">
                    <div class="input-header">
                        <span class="card-emoji" id="input-emoji"></span>
                        <h2 id="input-title"></h2>
                        <p id="input-subtitle"></p>
                    </div>
                    <div id="input-area"></div>
                    <button class="submit-btn" id="submit-btn" onclick="measureAura()" disabled>
                        ‚ú® Revelar Minha Aura ‚ú®
                    </button>
                </div>
            </div>
        </div>

        <!-- Screen 3: Loading -->
        <div class="loading-screen" id="screen-loading">
            <div class="loading-orb"></div>
            <p class="loading-text">Analisando sua energia c√≥smica<span class="loading-dots"></span></p>
        </div>

        <!-- Screen 4: Result -->
        <div class="screen" id="screen-result">
            <div class="result-screen">
                <div class="result-card" id="result-card">
                    <p class="result-label">Seu N√≠vel de Aura</p>
                    <div class="aura-circle" id="aura-circle">
                        <div class="glow-ring" style="--ring-opacity: 1;"></div>
                        <div class="glow-ring"></div>
                        <div class="glow-ring"></div>
                        <span class="aura-number"><span id="aura-value">0</span><span class="unit">/100</span></span>
                    </div>
                    <h2 class="aura-tier" id="aura-tier"></h2>
                    <p class="aura-description" id="aura-desc"></p>
                    <div class="aura-bar-container">
                        <div class="aura-bar" id="aura-bar"></div>
                    </div>
                    <div class="aura-traits" id="aura-traits"></div>
                    <div class="result-actions">
                        <button class="retry-btn" onclick="goBack()">üîÑ Tentar Outra</button>
                        <button class="share-btn" onclick="tryAgain()">üè† In√≠cio</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== Stars Background ==========
        function createStars() {
            const container = document.getElementById('stars');
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.setProperty('--duration', (2 + Math.random() * 4) + 's');
                star.style.animationDelay = Math.random() * 4 + 's';
                star.style.width = star.style.height = (1 + Math.random() * 2) + 'px';
                container.appendChild(star);
            }
        }
        createStars();

        // ========== Category Data ==========
        let currentCategory = '';

        const categoryConfig = {
            frase: {
                emoji: 'üí¨',
                title: 'Frase Pessoal',
                subtitle: 'Digite sua frase favorita ou lema de vida',
                input: `<div class="input-group">
                        <label>Sua frase ou lema de vida:</label>
                        <textarea id="user-input" placeholder="Ex: A vida √© uma aventura ousada ou nada..." oninput="checkInput()"></textarea>
                    </div>`
            },
            numero: {
                emoji: 'üî¢',
                title: 'N√∫mero Favorito',
                subtitle: 'Cada n√∫mero carrega uma frequ√™ncia c√≥smica',
                input: `<div class="input-group">
                        <label>Qual √© o seu n√∫mero favorito?</label>
                        <input type="number" id="user-input" placeholder="Ex: 7, 13, 42..." oninput="checkInput()">
                    </div>`
            },
            foto: {
                emoji: 'üì∏',
                title: 'Foto',
                subtitle: 'Envie uma foto que te representa',
                input: `<div class="input-group">
                        <div class="file-upload-area" id="upload-area">
                            <input type="file" accept="image/*" id="file-input" onchange="handleFile(event)">
                            <div class="upload-icon">üì§</div>
                            <p class="upload-text"><strong>Clique aqui</strong> ou arraste uma foto</p>
                            <img class="preview-img" id="preview-img">
                        </div>
                    </div>`
            },
            personagem: {
                emoji: 'ü¶∏',
                title: 'Personagem Favorito',
                subtitle: 'Qual personagem voc√™ mais admira?',
                input: `<div class="input-group">
                        <label>Nome do personagem:</label>
                        <input type="text" id="user-input" placeholder="Ex: Goku, Naruto, Batman..." oninput="checkInput()">
                    </div>
                    <div class="input-group">
                        <label>De qual universo? (opcional)</label>
                        <input type="text" id="user-input-extra" placeholder="Ex: Dragon Ball, Marvel, Anime...">
                    </div>`
            },
            musica: {
                emoji: 'üéµ',
                title: 'M√∫sica Favorita',
                subtitle: 'Qual m√∫sica toca na trilha da sua vida?',
                input: `<div class="input-group">
                        <label>Nome da m√∫sica:</label>
                        <input type="text" id="user-input" placeholder="Ex: Bohemian Rhapsody" oninput="checkInput()">
                    </div>
                    <div class="input-group">
                        <label>Artista (opcional):</label>
                        <input type="text" id="user-input-extra" placeholder="Ex: Queen">
                    </div>`
            },
            signo: {
                emoji: '‚ôà',
                title: 'Signo',
                subtitle: 'Selecione seu signo do zod√≠aco',
                input: `<div class="input-group">
                        <label>Seu signo:</label>
                        <select id="user-input" onchange="checkInput()">
                            <option value="">Selecione...</option>
                            <option value="√Åries">‚ôà √Åries</option>
                            <option value="Touro">‚ôâ Touro</option>
                            <option value="G√™meos">‚ôä G√™meos</option>
                            <option value="C√¢ncer">‚ôã C√¢ncer</option>
                            <option value="Le√£o">‚ôå Le√£o</option>
                            <option value="Virgem">‚ôç Virgem</option>
                            <option value="Libra">‚ôé Libra</option>
                            <option value="Escorpi√£o">‚ôè Escorpi√£o</option>
                            <option value="Sagit√°rio">‚ôê Sagit√°rio</option>
                            <option value="Capric√≥rnio">‚ôë Capric√≥rnio</option>
                            <option value="Aqu√°rio">‚ôí Aqu√°rio</option>
                            <option value="Peixes">‚ôì Peixes</option>
                        </select>
                    </div>`
            },
            emoji: {
                emoji: 'üòé',
                title: 'Emoji Favorito',
                subtitle: 'Qual emoji mais te representa?',
                input: `<div class="input-group">
                        <label>Seu emoji favorito:</label>
                        <input type="text" id="user-input" placeholder="Ex: üî•, üòé, üíÄ, üóø..." oninput="checkInput()" maxlength="4">
                    </div>`
            }
        };

        // ========== Navigation ==========
        function showScreen(id) {
            document.querySelectorAll('.screen, .loading-screen').forEach(s => {
                s.classList.remove('active');
            });
            const el = document.getElementById('screen-' + id);
            if (el) {
                el.classList.add('active');
                // Re-trigger animation
                el.style.animation = 'none';
                el.offsetHeight;
                el.style.animation = '';
            }
        }

        function selectCategory(cat) {
            currentCategory = cat;
            const config = categoryConfig[cat];

            document.getElementById('input-emoji').textContent = config.emoji;
            document.getElementById('input-title').textContent = config.title;
            document.getElementById('input-subtitle').textContent = config.subtitle;
            document.getElementById('input-area').innerHTML = config.input;
            document.getElementById('submit-btn').disabled = true;

            showScreen('input');
        }

        function goBack() {
            showScreen('categories');
            currentCategory = '';
        }

        function tryAgain() {
            showScreen('categories');
            currentCategory = '';
        }

        function checkInput() {
            const input = document.getElementById('user-input');
            if (input) {
                document.getElementById('submit-btn').disabled = !input.value.trim();
            }
        }

        function handleFile(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const preview = document.getElementById('preview-img');
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                    document.getElementById('upload-area').classList.add('has-file');
                    document.getElementById('submit-btn').disabled = false;
                }
                reader.readAsDataURL(file);
            }
        }

        // ========== Aura Calculation ==========
        function hashString(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash |= 0;
            }
            return Math.abs(hash);
        }

        const auraTiers = [
            // === Tiers secretos negativos ===
            { min: -200, max: -100, tier: 'Aura Brainrot üß†ü™±', desc: 'SKIBIDI SIGMA OHIO... Sua aura foi completamente consumida pelo brainrot. N√£o h√° mais salva√ß√£o.', color: '#1e272e', color2: '#485460', traits: ['Brainrot', 'Cringe M√°ximo', 'Gen Alpha', 'Irrecuper√°vel', 'üöΩ'] },
            { min: -99, max: -1, tier: 'Aura das Trevas üíÄ', desc: 'Voc√™ ousou falar mal do p√£o de queijo... As for√ßas c√≥smicas te condenam!', color: '#2d3436', color2: '#636e72', traits: ['Herege', 'Sem Paladar', 'Amaldi√ßoado', 'Anti-Queijo'] },
            // === Tiers normais ===
            { min: 0, max: 15, tier: 'Aura de Pedra ü™®', desc: 'Sua aura est√° em modo hiberna√ß√£o... Talvez um caf√© ajude!', color: '#636e72', color2: '#b2bec3', traits: ['Introvertido', 'Misterioso', 'Reservado'] },
            { min: 16, max: 30, tier: 'Aura Nebulosa üå´Ô∏è', desc: 'Sua aura √© como uma n√©voa... bonita, mas dif√≠cil de entender.', color: '#74b9ff', color2: '#a29bfe', traits: ['Pensativo', 'Calmo', 'Sonhador'] },
            { min: 31, max: 45, tier: 'Aura Crescente üåô', desc: 'Sua aura est√° crescendo como a lua! Tem potencial c√≥smico guardado.', color: '#81ecec', color2: '#00cec9', traits: ['Determinado', 'Curioso', 'Resiliente'] },
            { min: 46, max: 60, tier: 'Aura Brilhante ‚≠ê', desc: 'Voc√™ brilha naturalmente! As pessoas sentem sua presen√ßa ao entrar no recinto.', color: '#fdcb6e', color2: '#ffeaa7', traits: ['Carism√°tico', 'Confiante', 'Magn√©tico'] },
            { min: 61, max: 75, tier: 'Aura de Fogo üî•', desc: 'Sua aura √© puro fogo! Voc√™ √© uma for√ßa da natureza que inspira todos ao redor.', color: '#e17055', color2: '#fab1a0', traits: ['Intenso', 'Apaixonado', 'L√≠der'] },
            { min: 76, max: 89, tier: 'Aura Transcendental üåå', desc: 'Poucos alcan√ßam esse n√≠vel! Sua energia transcende dimens√µes.', color: '#a29bfe', color2: '#6c5ce7', traits: ['Vision√°rio', 'S√°bio', 'Poderoso'] },
            { min: 90, max: 100, tier: 'Aura Divina üëë', desc: 'LEND√ÅRIO! Sua aura √© t√£o poderosa que distorce a realidade ao seu redor!', color: '#fdcb6e', color2: '#e84393', traits: ['Lend√°rio', 'Divino', 'Inigual√°vel', 'Supremo'] },

            // ============================
            // === TIERS SECRETOS ===
            // ============================

            // --- P√£o de Queijo ---
            { min: 101, max: 200, tier: 'Aura do P√£o de Queijo üßÄ‚ú®', desc: 'A SAGRADA AURA DO P√ÉO DE QUEIJO! Voc√™ √© uma pessoa de cultura refinada e paladar impec√°vel!', color: '#f9ca24', color2: '#f0932b', traits: ['Mineiro Raiz', 'Aben√ßoado', 'Paladar Divino', 'Queij√≥latra'] },

            // --- JoJo individuais ---
            { min: 301, max: 301, tier: 'Aura de DIO üßõ‚è∞', desc: 'KONO DIO DA! O tempo parou! Sua aura √© a de um vampiro imortal que transcende a humanidade. WRYYYY!', color: '#f9ca24', color2: '#e74c3c', traits: ['Vampiro Imortal', 'Za Warudo', 'WRYYY', 'Rejeita Humanidade', 'MUDA MUDA'] },
            { min: 302, max: 302, tier: 'Aura de Jotaro ‚≠êüü£', desc: 'Yare yare daze... Sua aura √© fria como gelo, mas explode com a for√ßa de Star Platinum! ORA ORA ORA!', color: '#3742fa', color2: '#6c5ce7', traits: ['Star Platinum', 'ORA ORA', 'Yare Yare', 'Delinquente', 'Marinheiro'] },
            { min: 303, max: 303, tier: 'Aura de Giorno üü°üéπ', desc: 'Eu, Giorno Giovanna, tenho um sonho! Sua aura brilha com Golden Experience Requiem. Infinito poder!', color: '#f9ca24', color2: '#6c5ce7', traits: ['Golden Experience', 'Sonhador', 'Gang-Star', 'Requiem', 'Piano Theme'] },
            { min: 304, max: 304, tier: 'Aura de Speedwagon ‚ù§Ô∏èüé©', desc: 'At√© o gelo do cora√ß√£o derrete com essa aura! Speedwagon √© a melhor waifu e voc√™ sabe disso!', color: '#e84393', color2: '#fd79a8', traits: ['Melhor Waifu', 'Funda√ß√£o SPW', 'Cavalheiro', 'Cora√ß√£o Quente', 'Leal'] },
            { min: 305, max: 305, tier: 'Aura Bizarre ‚ú®üíé', desc: '„Ç¥„Ç¥„Ç¥„Ç¥... Sua Aventura Bizarra come√ßou! Voc√™ √© um Stand User e atrai outros Stand Users!', color: '#6c5ce7', color2: '#a29bfe', traits: ['Stand User', 'Bizarre', '„Ç¥„Ç¥„Ç¥„Ç¥', 'Hamon', 'Menacing'] },

            // --- Anime individuais ---
            { min: 401, max: 401, tier: 'Aura Saiyajin üêâ‚ö°', desc: 'KAAAA-MEEE-HAAA-MEEE-HAAAAAA! Sua aura explode como um Super Saiyajin! Todos os scouters quebraram!', color: '#f39c12', color2: '#e74c3c', traits: ['Super Saiyajin', 'Poder de Luta', 'Kamehameha', 'Zenkai Boost', 'Kakarot'] },
            { min: 402, max: 402, tier: 'Aura Ninja üç•üåÄ', desc: 'DATTEBAYO! Sua aura carrega a Vontade do Fogo! O caminho ninja nunca volta atr√°s!', color: '#e67e22', color2: '#d35400', traits: ['Hokage', 'Rasengan', 'Talk no Jutsu', 'Dattebayo', 'Vontade do Fogo'] },
            { min: 403, max: 403, tier: 'Aura do Rei dos Piratas üè¥‚Äç‚ò†Ô∏èüó∫Ô∏è', desc: 'O ONE PIECE √â REAL! Sua aura carrega o esp√≠rito de liberdade! Gear 5 awakened!', color: '#e74c3c', color2: '#f39c12', traits: ['Rei dos Piratas', 'Gear 5', 'Gomu Gomu', 'Nakama', 'Liberdade'] },
            { min: 404, max: 404, tier: 'Aura do Tit√£ ‚öîÔ∏èüè∞', desc: 'SHINZOU WO SASAGEYO! Sua aura √© a de quem luta pela liberdade da humanidade! TATAKAE!', color: '#2d3436', color2: '#636e72', traits: ['Tatakae', 'Sasageyo', 'Liberdade', 'Tit√£', 'Asas da Liberdade'] },
            { min: 405, max: 405, tier: 'Aura Jujutsu üëÅÔ∏èüíÄ', desc: 'DOMAIN EXPANSION! Sua aura amaldi√ßoada est√° no n√≠vel de um feiticeiro especial! Hollow Purple!', color: '#6c5ce7', color2: '#0984e3', traits: ['Feiticeiro Especial', 'Domain Expansion', 'Energia Amaldi√ßoada', 'Infinity', 'Hollow Purple'] },
            { min: 406, max: 406, tier: 'Aura PLUS ULTRA üíö‚ö°', desc: 'PLUS ULTRA!!! Sua aura vai al√©m dos limites! United States of SMAAASH!', color: '#00b894', color2: '#00cec9', traits: ['Plus Ultra', 'Symbol of Peace', 'One For All', 'SMASH!', 'Hero n¬∫1'] },
            { min: 407, max: 407, tier: 'Aura de Um Soco üëäüòê', desc: 'OK. Um soco √© tudo que voc√™ precisa. Sua aura √© t√£o absurda que causa t√©dio existencial.', color: '#fdcb6e', color2: '#ffeaa7', traits: ['Careca Poderoso', 'S√©rio Punch', 'OK', 'T√©dio Existencial', '100 Flex√µes/Dia'] },
            { min: 408, max: 408, tier: 'Aura Respira√ß√£o do Sol üî•‚öîÔ∏è', desc: 'HINOKAMI KAGURA! Sua aura queima como as chamas do Sol! A l√¢mina se torna carmesim!', color: '#e74c3c', color2: '#f39c12', traits: ['Ca√ßador de Dem√¥nios', 'Hinokami Kagura', 'Respira√ß√£o Solar', 'L√¢mina Nichirin', 'Gonpachiro'] },
            { min: 409, max: 409, tier: 'Aura do Death Note üìì‚úçÔ∏è', desc: 'Eu sou a justi√ßa! Sua aura carrega o poder de um deus da morte. O nome foi escrito!', color: '#2d3436', color2: '#d63031', traits: ['Kira', 'Justi√ßa', 'Shinigami', 'Keikaku Doori', 'Eu Tomarei Batatas'] },
            { min: 410, max: 410, tier: 'Aura Otaku Supremo üå∏‚ú®', desc: 'Sua aura emana cultura japonesa pura! Voc√™ transcendeu o 3D e abra√ßou o 2D!', color: '#fd79a8', color2: '#e84393', traits: ['Otaku Raiz', 'Sugoi', 'Cultura 2D', 'Body Pillow', 'Isekai Material'] },

            // --- Memes individuais ---
            { min: 501, max: 501, tier: 'Aura Rickroll üé§üï∫', desc: 'Never gonna give you up! Never gonna let you down! Sua aura √© uma armadilha musical ETERNA!', color: '#e17055', color2: '#fab1a0', traits: ['Never Gonna', 'Let You Down', 'Rick Astley', 'Trollador', 'M√∫sica Eterna'] },
            { min: 502, max: 502, tier: 'Aura Heisenberg üß™üíé', desc: 'Say my name. Sua aura √© pura como cristal azul 99.1%! Voc√™ √© aquele que bate na porta!', color: '#0984e3', color2: '#74b9ff', traits: ['Heisenberg', 'I Am The Danger', 'Crystal Blue', 'Chemistry', 'Jesse!'] },
            { min: 503, max: 503, tier: 'Aura do Infinito ‚ö°ü´∞', desc: 'Eu sou inevit√°vel! Sua aura est√° perfeitamente balanceada, como tudo deveria ser. *snap*', color: '#6c5ce7', color2: '#a29bfe', traits: ['Inevit√°vel', 'Perfectly Balanced', 'Snap', 'Infinity Stones', 'Universo'] },
            { min: 504, max: 504, tier: 'Aura GigaChad üóøüí™', desc: 'Average fan vs Average enjoyer. Sua aura √© t√£o BASED que a realidade se curva ao seu chad!', color: '#2d3436', color2: '#dfe6e9', traits: ['GigaChad', 'Based', 'Enjoyer', 'üóø', 'Alpha Supremo'] },
            { min: 505, max: 505, tier: 'Aura Gamer üéÆüëë', desc: 'GG WP EZ CLAP! Sua aura √© 100% skill, 0% luck. Todo mundo tem um skill issue, menos voc√™!', color: '#00b894', color2: '#55efc4', traits: ['Pro Player', 'GG EZ', 'No Skill Issue', 'Clutch Master', 'Git Gud'] },
            { min: 506, max: 506, tier: 'Aura Internet Cl√°ssica üíæüåê', desc: 'All your base are belong to us! Sua aura √© da era de ouro da internet! The cake is a lie!', color: '#636e72', color2: '#b2bec3', traits: ['OG Internet', 'The Cake Is A Lie', 'All Your Base', 'Leet Speak', 'Vintage'] },
            { min: 507, max: 507, tier: 'Aura do Sofrimento ‚òïüî•', desc: 'This is fine. Tudo est√° pegando fogo mas sua aura est√° tranquila. Why are we still here? Just to suffer.', color: '#e17055', color2: '#fdcb6e', traits: ['This Is Fine', 'Sofredor', 'Caf√© & Caos', 'Just To Suffer', 'Resili√™ncia Meme'] },
            { min: 508, max: 508, tier: 'Aura Society üÉèüåÉ', desc: 'Vivemos em uma sociedade. Sua aura entende que ningu√©m pergunta "como √© o Joker?" Profundo!', color: '#00b894', color2: '#6c5ce7', traits: ['Vivemos Numa Sociedade', 'Profundo', 'Joker', 'Bottom Text', 'Filosofia Meme'] },
            { min: 509, max: 509, tier: 'Aura Morbin\' Time ü¶áüßõ', desc: 'IT\'S MORBIN TIME! Sua aura √© uma das auras de todos os tempos! Verdadeiramente um momento Morbius!', color: '#2d3436', color2: '#636e72', traits: ['Morbin Time', 'Morbillion', 'Filme de Todos os Tempos', 'Morbius Sweep', 'Cult Classic'] },
            { min: 510, max: 510, tier: 'Aura CJ üöóüí®', desc: 'Ah shit, here we go again. Sua aura domina as ruas de Grove Street! Follow the damn train!', color: '#27ae60', color2: '#2ecc71', traits: ['Grove Street', 'Here We Go Again', 'Big Smoke', 'Follow The Train', 'San Andreas'] },

            // --- Livros / Novels ---
            { min: 601, max: 601, tier: 'Aura da Terra M√©dia üßôüíç', desc: 'Nem todos que vagam est√£o perdidos. Sua aura brilha como a luz de E√§rendil! Um verdadeiro portador do Anel!', color: '#c8a45c', color2: '#8b6914', traits: ['Portador do Anel', 'Gandalf Aprova', 'Shire', 'N√£o Passar√°s', 'Tolkien'] },
            { min: 602, max: 602, tier: 'Aura de Hogwarts üßô‚Äç‚ôÇÔ∏è‚ö°', desc: 'EXPECTO PATRONUM! Sua aura √© m√°gica pura! A varinha te escolheu e Hogwarts √© seu lar!', color: '#7b3fa0', color2: '#c56cf0', traits: ['Bruxo', 'Expecto Patronum', 'Hogwarts', 'Always', 'A Varinha Escolhe'] },
            { min: 603, max: 603, tier: 'Aura do Tolo Acima da N√©voa üé≠üå´Ô∏è', desc: 'Acima da n√©voa cinza, O Tolo observa tudo. O Tarot Club se re√∫ne! Klein Moretti transcende os Caminhos!', color: '#485460', color2: '#c56cf0', traits: ['O Tolo', 'Beyonder', 'Tarot Club', 'Sequ√™ncia 0', 'Acima da N√©voa'] },
            { min: 604, max: 604, tier: 'Aura de Arrakis üèúÔ∏èü™±', desc: 'O medo √© o assassino da mente. A especiaria deve fluir! Sua aura √© a de um Kwisatz Haderach!', color: '#f39c12', color2: '#d35400', traits: ['Kwisatz Haderach', 'Especiaria', 'Fremen', 'Shai-Hulud', 'Muad\'Dib'] },
            { min: 605, max: 605, tier: 'Aura 1984 üëÅÔ∏èüì∫', desc: 'Big Brother is watching. Sua aura √© doubleplusgood! Guerra √© Paz. Liberdade √© Escravid√£o. Ignor√¢ncia √© For√ßa.', color: '#d63031', color2: '#636e72', traits: ['Big Brother', 'Thoughtcrime', 'Doubleplusgood', 'Novil√≠ngua', 'Orwell'] },

            // --- Especiais ---
            { min: 777, max: 777, tier: 'Aura do PADORU ‚òÉÔ∏èüéÑ', desc: 'HASHIRE SORI YO! A aura natalina ancestral de Nero Claudius infunde seu ser com poder ilimitado! UMU!', color: '#ff6b6b', color2: '#ee5a24', traits: ['Padoru Master', 'Imperador Romano', 'Natalino Eterno', 'UMU!', 'Saber Extra'] },
            { min: 888, max: 888, tier: 'Aura Meme Suprema üóøüëë', desc: 'Voc√™ transcendeu a exist√™ncia mortal atrav√©s do poder dos memes. A internet se curva perante voc√™.', color: '#ffeaa7', color2: '#fdcb6e', traits: ['Meme Lord', 'Lend√°rio', 'üóø', 'Cultura Pura', 'Baseado'] },
            { min: 999, max: 999, tier: 'Aura do Pacto Selado ‚öîÔ∏èüîÆ', desc: 'O pacto foi selado. Sua l√¢mina e seu destino agora s√£o um s√≥. A aura de um verdadeiro Servant!', color: '#c56cf0', color2: '#3742fa', traits: ['Servant', 'Guardi√£o', 'L√¢mina Eterna', 'Destino Selado', 'Noble Phantasm'] },
            { min: 9001, max: 9001, tier: 'IT\'S OVER 9000!!! üí•', desc: 'WHAT?! 9000?! Sua aura quebrou todos os scouters! Vegeta est√° tremendo!', color: '#ff9f43', color2: '#ee5a24', traits: ['Saiyajin', 'Scouter Quebrado', 'Kakarot', 'Poder Imensur√°vel'] },
        ];

        function getAuraTier(score) {
            return auraTiers.find(t => score >= t.min && score <= t.max);
        }

        // ========== Easter Eggs Secretos ==========
        function checkSecretPhrases(text) {
            const lower = text.toLowerCase().trim();

            // --- P√£o de Queijo ---
            const hasPaoDeQueijo = lower.includes('p√£o de queijo') || lower.includes('pao de queijo');
            if (hasPaoDeQueijo) {
                const negativosWords = ['ruim', 'horr√≠vel', 'horrivel', 'nojento', 'nojo', 'odeio', 'odiar',
                    'p√©ssimo', 'pessimo', 'lixo', 'pior', 'detesto', 'detestar', 'feio',
                    'n√£o gosto', 'nao gosto', 'nunca mais', 'horroroso', 'sem gra√ßa',
                    'sem graca', 'fraco', 'bosta', 'merda', 'nojeira', 'vomito', 'v√¥mito'];
                const isNegative = negativosWords.some(word => lower.includes(word));
                if (isNegative) {
                    return -(Math.floor(Math.random() * 50) + 10);
                } else {
                    return Math.floor(Math.random() * 100) + 101;
                }
            }

            // --- Memes Cringe / Brainrot ---
            const cringePhrases = ['skibidi', 'sigma', 'rizz', 'gyatt', 'ohio', 'fanum tax',
                'baby gronk', 'gronk', 'looksmaxxing', 'mewing', 'mogging', 'aura check',
                'edging', 'gooning', 'hawk tuah', 'erm what the sigma', 'what the sigma',
                's√≥ passinho', 'so passinho', 'griddy', 'the griddy',
                '0 six seven', 'zero six seven', 'zero seis sete', '0 seis sete',
                'seis sete', 'six seven'];
            if (cringePhrases.some(p => lower.includes(p))) {
                return -(Math.floor(Math.random() * 100) + 100);
            }

            // --- PADORU (antes do JoJo pra n√£o conflitar com Nero/Fate) ---
            const padoruPhrases = ['hashire sori yo', 'kaze no you ni', 'tsukimihara wo', 'padoru padoru'];
            if (padoruPhrases.filter(p => lower.includes(p)).length >= 2 || lower.includes('padoru')) {
                return 777;
            }

            // --- Blade Pact ---
            if (lower.includes('my blade is with you') || lower.includes('our pact is now sealed') ||
                lower.includes('your fate with me')) {
                return 999;
            }

            // ===== JOJO INDIVIDUAIS =====
            // DIO
            if (['kono dio da', 'za warudo', 'muda muda', 'wryyyy', 'wryyy', 'dio brando',
                'road roller', 'you thought it was'].some(p => lower.includes(p))) {
                return 301;
            }
            // Jotaro
            if (['star platinum', 'ora ora', 'yare yare daze', 'yare yare',
                'oh you\'re approaching me', 'you\'re approaching me'].some(p => lower.includes(p))) {
                return 302;
            }
            // Giorno
            if (['giorno', 'golden experience', 'i giorno giovanna have a dream', 'requiem',
                'gold experience'].some(p => lower.includes(p))) {
                return 303;
            }
            // Speedwagon
            if (['speedwagon', 'speed wagon', 'melhor waifu', 'best waifu'].some(p => lower.includes(p))) {
                return 304;
            }
            // JoJo gen√©rico
            if (['jojo', 'jotaro', 'josuke', 'joseph joestar', 'stand power', 'menacing', 'bizarre',
                'hamon', 'ripple', 'spin', 'killer queen', 'king crimson', 'crazy diamond',
                'stone ocean', 'steel ball run', 'tusk', 'soft and wet', 'echoes',
                'is that a jojo', 'jojo reference', 'referencia de jojo', 'dio',
                'nigerundayo', 'hermit purple', 'silver chariot', 'the hand',
                'made in heaven', 'bizzare adventure'].some(p => lower.includes(p))) {
                return 305;
            }

            // ===== ANIME INDIVIDUAIS =====
            // Dragon Ball
            if (['goku', 'vegeta', 'kamehameha', 'ka me ha me ha', 'super saiyan', 'super saiyajin',
                'ultra instinct', 'instinto superior', 'dragon ball', 'ningen',
                'it\'s over 9000', 'over 9000', 'mais de 8000', 'kakarot', 'frieza', 'gohan',
                'genki dama', 'spirit bomb', 'fusion', 'gogeta', 'vegito'].some(p => lower.includes(p))) {
                return 401;
            }
            // Naruto
            if (['naruto', 'sasuke', 'rasengan', 'chidori', 'dattebayo', 'believe it',
                'talk no jutsu', 'kage bunshin', 'shadow clone', 'sharingan', 'rinnegan',
                'byakugan', 'sage mode', 'susanoo', 'amaterasu', 'hokage', 'akatsuki',
                'itachi', 'kakashi', 'hinata', 'sakura'].some(p => lower.includes(p))) {
                return 402;
            }
            // One Piece
            if (['luffy', 'zoro', 'one piece', 'gomu gomu', 'gear 5', 'gear fifth',
                'kaizoku ou', 'pirate king', 'rei dos piratas', 'nakama',
                'sanji', 'nami', 'chopper', 'brook', 'ace', 'barba branca',
                'whitebeard', 'shanks', 'haki'].some(p => lower.includes(p))) {
                return 403;
            }
            // Attack on Titan
            if (['eren', 'mikasa', 'levi', 'sasageyo', 'shinzou wo sasageyo', 'tatakae',
                'attack on titan', 'shingeki', 'titan', 'rumbling', 'ackerman',
                'colossal', 'armored titan', 'founding titan', 'erwin'].some(p => lower.includes(p))) {
                return 404;
            }
            // Jujutsu Kaisen
            if (['gojo', 'domain expansion', 'itadori', 'sukuna', 'jujutsu', 'hollow purple',
                'infinite void', 'malevolent shrine', 'aoi todo', 'nanami', 'fushiguro',
                'energia amaldi√ßoada', 'cursed energy', 'limitless'].some(p => lower.includes(p))) {
                return 405;
            }
            // My Hero Academia
            if (['plus ultra', 'all might', 'deku', 'detroit smash', 'united states of smash',
                'full cowling', 'one for all', 'all for one', 'bakugo', 'todoroki',
                'boku no hero', 'my hero', 'symbol of peace'].some(p => lower.includes(p))) {
                return 406;
            }
            // One Punch Man
            if (['saitama', 'one punch', 'serious punch', 'serious series',
                'ok.', 'genos', 'caped baldy', 'careca', 'classe b'].some(p => lower.includes(p))) {
                return 407;
            }
            // Demon Slayer
            if (['tanjiro', 'nezuko', 'zenitsu', 'inosuke', 'hinokami', 'demon slayer',
                'kimetsu', 'respira√ß√£o', 'breathing', 'hashira', 'muzan',
                'rengoku', 'flame breathing'].some(p => lower.includes(p))) {
                return 408;
            }
            // Death Note
            if (['death note', 'light yagami', 'kira', 'ryuk', 'shinigami', 'l lawliet',
                'i am justice', 'eu sou a justi√ßa', 'keikaku', 'just as planned',
                'i\'ll take a potato chip', 'tomarei batata'].some(p => lower.includes(p))) {
                return 409;
            }
            // Gen√©rico Otaku
            if (['anime', 'otaku', 'weeb', 'sugoi', 'kawaii', 'senpai', 'sensei', 'baka',
                'tsundere', 'yamete', 'kisama', 'omae wa mou shindeiru', 'nani',
                'shounen', 'anime √© arte', 'anime is art', 'waifu', 'husbando',
                'isekai', 'manga', 'tomodachi'].some(p => lower.includes(p))) {
                return 410;
            }

            // ===== MEMES INDIVIDUAIS =====
            // Rickroll
            if (['never gonna give you up', 'rickroll', 'rick roll', 'rick astley',
                'you know the rules', 'never gonna let you down'].some(p => lower.includes(p))) {
                return 501;
            }
            // Breaking Bad
            if (['walter white', 'heisenberg', 'say my name', 'i am the danger',
                'jesse we need to cook', 'science bitch', 'breaking bad',
                'better call saul', 'saul goodman', 'los pollos', 'gustavo fring'].some(p => lower.includes(p))) {
                return 502;
            }
            // Marvel / Thanos
            if (['i am inevitable', 'eu sou inevit√°vel', 'thanos', 'perfectly balanced',
                'snap', 'infinity', 'avengers assemble', 'wakanda forever', 'i am groot',
                'i am iron man', 'marvel', 'endgame'].some(p => lower.includes(p))) {
                return 503;
            }
            // GigaChad / Based
            if (['gigachad', 'chad', 'based', 'üóø', 'moyai', 'thug life', 'deal with it',
                'a man of culture', 'homem de cultura', 'average enjoyer',
                'i am built different', 'sou diferente'].some(p => lower.includes(p))) {
                return 504;
            }
            // Gamer
            if (['gg wp', 'ez clap', 'skill issue', 'git gud', 'habilidade issue',
                'pro player', 'clutch', 'noob', 'spawn kill', 'rage quit',
                'gamer', 'gaming', 'speedrun', 'world record'].some(p => lower.includes(p))) {
                return 505;
            }
            // Internet Cl√°ssica
            if (['the cake is a lie', 'all your base', 'leeroy jenkins', 'do a barrel roll',
                'i can has', 'nyan cat', 'trollface', 'rage comic',
                'pepe', 'feels good man', 'feels bad man', 'doge', 'much wow',
                'so doge', 'harambe'].some(p => lower.includes(p))) {
                return 506;
            }
            // This is Fine / Sofrimento
            if (['this is fine', 'why are we still here', 'just to suffer',
                'todo mundo gangsta', 'ah shit here we go again', 'aqui vamos n√≥s de novo',
                'pain', 'suffering', 'sofrimento', 'confused unga bunga',
                'i\'m fine', 'estou bem'].some(p => lower.includes(p))) {
                return 507;
            }
            // Society / Joker
            if (['we live in a society', 'vivemos em uma sociedade', 'vivemos numa sociedade',
                'society', 'joker', 'coringa', 'bottom text', 'deep', 'profundo'].some(p => lower.includes(p))) {
                return 508;
            }
            // Morbius
            if (['it\'s morbin time', 'morbin', 'morbius', 'morbillion',
                'morbin time', 'morb'].some(p => lower.includes(p))) {
                return 509;
            }
            // GTA / CJ
            if (['ah shit here we go again', 'grove street', 'follow the damn train',
                'big smoke', 'san andreas', 'gta', 'cj', 'all you had to do'].some(p => lower.includes(p))) {
                return 510;
            }

            // ===== LIVROS / NOVELS =====
            // Senhor dos An√©is / Tolkien
            if (['nem todos que vagam', 'not all those who wander', 'not all who wander',
                'you shall not pass', 'n√£o passar√°s', 'nao passaras', 'my precious', 'meu precioso',
                'one ring to rule them all', 'um anel para todos governar',
                'one does not simply', 'frodo', 'gandalf', 'aragorn', 'legolas', 'gimli',
                'sauron', 'mordor', 'shire', 'hobbit', 'tolkien', 'senhor dos aneis',
                'senhor dos an√©is', 'lord of the rings', 'gollum', 'smeagol',
                'bilbo', 'terra m√©dia', 'terra media', 'middle earth',
                'segunda era', 'valinor', 'rohan', 'gondor', 'minas tirith'].some(p => lower.includes(p))) {
                return 601;
            }
            // Harry Potter
            if (['expecto patronum', 'avada kedavra', 'wingardium leviosa', 'hogwarts',
                'harry potter', 'dumbledore', 'voldemort', 'always', 'after all this time',
                'i solemnly swear', 'mischief managed', 'expelliarmus', 'lumos', 'accio',
                'obliviate', 'gryffindor', 'slytherin', 'hufflepuff', 'ravenclaw',
                'horcrux', 'deathly hallows', 'reliquias da morte', 'patrono',
                'snape', 'hermione', 'ron weasley', 'dobby', 'hagrid',
                'plataforma 9', 'platform 9', 'grifinoria', 'sonserina',
                'quadribol', 'quidditch', 'comensal da morte', 'death eater'].some(p => lower.includes(p))) {
                return 602;
            }
            // Lord of the Mysteries
            if (['lord of the mysteries', 'lotm', 'klein moretti', 'the fool', 'o tolo',
                'tarot club', 'clube do tarot', 'beyonder', 'sequence', 'sequ√™ncia',
                'above the gray fog', 'acima da n√©voa', 'acima da nevoa', 'gray fog', 'n√©voa cinza',
                'seer', 'clown', 'marionettist', 'miracle invoker', 'error',
                'cuttlefish', 'cuttlefish that loves diving', 'cuttlefish lovediving',
                'amon', 'adam', 'evernight', 'goddess of the night', 'storm lord',
                'lord of storms', 'hanged man', 'justice', 'audrey hall',
                'the world', 'derrick berg', 'fors wall', 'emlyn white',
                'pillar pathway', 'hunter pathway', 'red priest',
                'mother tree', 'original creator', 'criador original',
                'sefirot', 'uniqueness', 'characteristic', 'potion',
                'acting method', 'acting principle', 'm√©todo de atua√ß√£o'].some(p => lower.includes(p))) {
                return 603;
            }
            // Dune
            if (['fear is the mind killer', 'medo √© o assassino', 'the spice must flow',
                'especiaria deve fluir', 'muad\'dib', 'muad dib', 'dune', 'duna',
                'arrakis', 'kwisatz haderach', 'bene gesserit', 'paul atreides',
                'shai-hulud', 'shai hulud', 'fremen', 'sandworm', 'verme da areia',
                'frank herbert', 'herbert', 'melange', 'litany against fear',
                'leto atreides', 'chani', 'stilgar', 'harkonnen'].some(p => lower.includes(p))) {
                return 604;
            }
            // 1984 / Orwell
            if (['big brother', 'grande irm√£o', 'grande irmao', 'war is peace', 'guerra √© paz',
                'freedom is slavery', 'liberdade √© escravid√£o', 'ignorance is strength',
                'ignor√¢ncia √© for√ßa', '1984', 'orwell', 'george orwell',
                'doubleplusgood', 'thoughtcrime', 'crimepensamento', 'newspeak', 'novil√≠ngua',
                'novilingua', 'ministry of truth', 'minist√©rio da verdade',
                'room 101', 'sala 101', 'two plus two equals five', 'we have always been at war'].some(p => lower.includes(p))) {
                return 605;
            }

            // --- Over 9000 num√©rico ---
            if (lower === '9000' || lower === '9001') {
                return 9001;
            }

            return null;
        }

        function measureAura() {
            let inputValue = '';

            if (currentCategory === 'foto') {
                const file = document.getElementById('file-input');
                inputValue = file.files[0] ? file.files[0].name + file.files[0].size : 'photo';
            } else {
                const input = document.getElementById('user-input');
                inputValue = input ? input.value : '';
            }

            // Verifica n√∫meros especiais (para categoria numero)
            let score;
            const numVal = parseInt(inputValue);

            const numberEasterEggs = {
                // Cringe/Brainrot
                67: -150, 69: -120, 420: -180, 1337: -110, 666: -160,
                // JoJo
                4: 305,     // Mista's unlucky number (JoJo gen√©rico)
                // Internet Cl√°ssica
                42: 506,    // Answer to life, the universe, and everything
                // Meme Suprema
                7: 888, 13: 888, 777: 888,
                // Over 9000
                9000: 9001, 9001: 9001,
            };

            if (currentCategory === 'numero' && numberEasterEggs[numVal] !== undefined) {
                score = numberEasterEggs[numVal];
            } else {
                // Verifica frases secretas
                const secretScore = checkSecretPhrases(inputValue);

                if (secretScore !== null) {
                    score = secretScore;
                } else {
                    // Score normal com hash + random
                    const hash = hashString(inputValue + Date.now().toString());
                    score = (hash % 101);
                }
            }

            const isSecret = score > 100 || score < 0;

            // Show loading
            showScreen('loading');

            // Easter eggs t√™m loading mais dram√°tico
            const loadingTime = isSecret
                ? 3500 + Math.random() * 2000
                : 2500 + Math.random() * 1500;

            // Show result after delay
            setTimeout(() => {
                displayResult(score);
            }, loadingTime);
        }

        function displayResult(score) {
            const tier = getAuraTier(score);

            // Set colors
            const card = document.getElementById('result-card');
            card.style.setProperty('--result-color', tier.color);
            card.style.setProperty('--result-color2', tier.color2);

            // Set aura circle background
            const circle = document.getElementById('aura-circle');
            circle.style.background = `radial-gradient(circle at 40% 40%, ${tier.color}33, ${tier.color2}22, transparent)`;

            // Animate score number
            const isSecret = score > 100 || score < 0;
            const displayMax = isSecret ? '' : '/100';
            document.querySelector('.aura-number .unit').textContent = displayMax;
            document.getElementById('aura-value').textContent = '0';
            animateNumber(document.getElementById('aura-value'), score);

            // Set tier info
            document.getElementById('aura-tier').textContent = tier.tier;
            document.getElementById('aura-tier').style.color = tier.color;
            document.getElementById('aura-desc').textContent = tier.desc;

            // Set bar
            const bar = document.getElementById('aura-bar');
            bar.style.width = '0%';
            bar.style.background = `linear-gradient(90deg, ${tier.color}, ${tier.color2})`;
            bar.style.boxShadow = `0 0 20px ${tier.color}`;

            // Set traits
            const traitsContainer = document.getElementById('aura-traits');
            traitsContainer.innerHTML = tier.traits.map(t =>
                `<span class="aura-trait">${t}</span>`
            ).join('');

            // Create particles
            createResultParticles(tier.color);

            // Show screen
            showScreen('result');

            // Trigger bar animation after a tiny delay
            const barWidth = score < 0 ? '100' : score > 100 ? '100' : score;
            requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                    bar.style.width = barWidth + '%';
                });
            });
        }

        function animateNumber(el, target) {
            let current = target < 0 ? 0 : 0;
            const duration = target > 100 || target < 0 ? 3000 : 2000;
            const step = 16;
            const increment = target / (duration / step);

            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                el.textContent = Math.round(current);
            }, step);
        }

        function createResultParticles(color) {
            const card = document.getElementById('result-card');
            // Remove old particles
            card.querySelectorAll('.particle').forEach(p => p.remove());

            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.background = color;
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.setProperty('--tx', (Math.random() - 0.5) * 200 + 'px');
                particle.style.setProperty('--ty', (Math.random() - 0.5) * 200 + 'px');
                particle.style.animationDelay = Math.random() * 2 + 's';
                particle.style.width = particle.style.height = (2 + Math.random() * 4) + 'px';
                card.appendChild(particle);
            }
        }
    </script>
</body>

</html>